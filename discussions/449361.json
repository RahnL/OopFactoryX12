[
  {
    "Id": "1065813",
    "ThreadId": "449361",
    "Html": "Hi,\r<br />\n<br />\nCould someone please help?\r<br />\n<br />\nI cannot seem to find how to show the Comment node for EB03 (or any children of EB03)\r<br />\n<br />\nThis is what I currently get while parsing 271;<br />\n<div style=\"color:Black;background-color:White;\"><pre>\r\n<span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">Loop</span> <span style=\"color:Red;\">LoopId</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">2110C</span><span style=\"color:Black;\">&quot;</span> <span style=\"color:Red;\">Name</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">Subscriber Eligibility or Benefit Information</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">&gt;</span>\n<span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB</span><span style=\"color:Blue;\">&gt;</span>\n<span style=\"color:Green;\">&lt;!-- Eligibility or Benefit Information Code --&gt;</span> \n<span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB01</span><span style=\"color:Blue;\">&gt;</span>\n  1 \n<span style=\"color:Green;\">&lt;!-- Active Coverage --&gt;</span> \n  <span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB01</span><span style=\"color:Blue;\">&gt;</span>\n  <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB02</span> <span style=\"color:Blue;\">/&gt;</span> \n<span style=\"color:Green;\">&lt;!-- Industry Code --&gt;</span> \n   <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB03</span><span style=\"color:Blue;\">&gt;</span>\n    <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB0301</span><span style=\"color:Blue;\">&gt;</span>98<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB0301</span><span style=\"color:Blue;\">&gt;</span> \n    <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB0302</span><span style=\"color:Blue;\">&gt;</span>33<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB0302</span><span style=\"color:Blue;\">&gt;</span> \n    <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB0303</span><span style=\"color:Blue;\">&gt;</span>50<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB0303</span><span style=\"color:Blue;\">&gt;</span> \n    <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB0304</span><span style=\"color:Blue;\">&gt;</span>48<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB0304</span><span style=\"color:Blue;\">&gt;</span> \n    <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB0305</span><span style=\"color:Blue;\">&gt;</span>86<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB0305</span><span style=\"color:Blue;\">&gt;</span> \n    <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB0306</span><span style=\"color:Blue;\">&gt;</span>MH<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB0306</span><span style=\"color:Blue;\">&gt;</span> \n    <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB0307</span><span style=\"color:Blue;\">&gt;</span>UC<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB0307</span><span style=\"color:Blue;\">&gt;</span> \n    <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB0308</span><span style=\"color:Blue;\">&gt;</span>47<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB0308</span><span style=\"color:Blue;\">&gt;</span> \n    <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB0309</span><span style=\"color:Blue;\">&gt;</span>1<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB0309</span><span style=\"color:Blue;\">&gt;</span> \n   <span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB03</span><span style=\"color:Blue;\">&gt;</span>\n  <span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB</span><span style=\"color:Blue;\">&gt;</span>\n<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">Loop</span><span style=\"color:Blue;\">&gt;</span>\r\n</pre></div>And this is the desired outcome;<br />\n<div style=\"color:Black;background-color:White;\"><pre>\r\n<span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">Loop</span> <span style=\"color:Red;\">LoopId</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">2110C</span><span style=\"color:Black;\">&quot;</span> <span style=\"color:Red;\">Name</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">Subscriber Eligibility or Benefit Information</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">&gt;</span>\n<span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB</span><span style=\"color:Blue;\">&gt;</span>\n<span style=\"color:Green;\">&lt;!-- Eligibility or Benefit Information Code --&gt;</span> \n<span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB01</span><span style=\"color:Blue;\">&gt;</span>\n  1 \n<span style=\"color:Green;\">&lt;!-- Active Coverage --&gt;</span> \n  <span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB01</span><span style=\"color:Blue;\">&gt;</span>\n  <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB02</span> <span style=\"color:Blue;\">/&gt;</span> \n<span style=\"color:Green;\">&lt;!-- Industry Code --&gt;</span> \n   <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB03</span><span style=\"color:Blue;\">&gt;</span>\n     <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB0301</span><span style=\"color:Blue;\">&gt;</span>\n       98\n      <span style=\"color:Green;\">&lt;!-- Professional (Physician) Visit - Office --&gt;</span>\n     <span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB0301</span><span style=\"color:Blue;\">&gt;</span> \n     <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">EB0302</span><span style=\"color:Blue;\">&gt;</span>\n       33\n      <span style=\"color:Green;\">&lt;!-- Chiropractic --&gt;</span>\n     <span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB0302</span><span style=\"color:Blue;\">&gt;</span> \n     .......\n   <span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB03</span><span style=\"color:Blue;\">&gt;</span>\n  <span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">EB</span><span style=\"color:Blue;\">&gt;</span>\n<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">Loop</span><span style=\"color:Blue;\">&gt;</span>\r\n</pre></div>I haven't quite figured it out yet but, it seems maybe these comments are created somewhere in WriteXml method in OopFactory.X12.Parsing.Model.Segment.cs (around line 194).\r<br />\n<br />\nAny information would be greatly appreciated!<br />\n",
    "PostedDate": "2013-07-08T14:39:35.77-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1067099",
    "ThreadId": "449361",
    "Html": "I have not personally been using these comments but i believe they can be added/modified by changing the Ansi-4010Specification.xml. Fo a search in the xml for the following <br />\n<pre><code> &lt;!-- 270/271 Segments --&gt; --&gt;&quot;</code></pre>\n\nOnce there you will find a segment EB defined along with how it does comments for each element value ect. You should be able to add your own segment information here where appropriate. In your example you would want to add a new one such as <br />\n<pre><code>  &lt;Segment SegmentId=&quot;EB03&quot;&gt;\n    &lt;Element Name=&quot;Your XML Comment for EB0301 HERE&quot; Type=&quot;ID&quot; MinLength=&quot;1&quot; MaxLength=&quot;2&quot;&gt;\n      &lt;Allowed ID=&quot;98&quot;&gt;Professional (Physician) Visit - Office&lt;/Allowed&gt;\n        &lt;!--your other values/comment descriptions here --&gt;\n     &lt;/Element&gt;\n    &lt;Element Name=&quot;Your XML Comment for EB0302 HERE&quot; Type=&quot;ID&quot; MinLength=&quot;1&quot; MaxLength=&quot;2&quot;&gt;\n      &lt;Allowed ID=&quot;33&quot;&gt;Chiropractic&lt;/Allowed&gt;\n        &lt;!--your other values/comment descriptions here --&gt;\n     &lt;/Element&gt;\n\n&lt;!-- the two samples above show how to handle ones that comment a specific defined value  the next two are more basic --&gt;\n    &lt;Element Name=&quot;Your XML Comment For EB0303&quot;/&gt;\n    &lt;Element Name=&quot;Your XML Comment For EB0304&quot;/&gt;\n  &lt;/Segment&gt;\n</code></pre>\n\nAgain I do not modify this information but if I am incorrect I have hopefully at least set you on the right path.<br />\n",
    "PostedDate": "2013-07-11T08:54:44.46-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1067235",
    "ThreadId": "449361",
    "Html": "Thank you for the information. I started to look in this direction (I am using 5010 spec btw) but, the problem I've run into (and maybe I'm not looking at it right) is that EB0301, EB0302 etc will not always be the same so I cannot rely on a static comment based on these EB03* elements.\r<br />\n<br />\nMaybe I've misunderstood the code but, I was attempting to find the reason why each ServiceType (lookup) only has the Code and not the Description in EligibilityBenefitDocument (as opposed to other lookup types like InfoType which has Code and Description. I was under the assumption that this ServiceType Description (in EligibilityBenefitDocument object) is set based on this Comment.\r<br />\n<br />\nI've created a work around for now which uses the ServiceType code to get the required element and InnerText and set the ServiceType.Description based on the InnerText but, I have a suspicion that this is not the ideal solution because it seems as though maybe this should already be occurring and is possibly a bug? I could be wrong.\r<br />\n<br />\nWhat I've done as a workaround (in case anyone else reads this);\r<br />\n1.) Created new EligibilityTransformService \r<br />\n2.) Created new Transform271ToBenefitResponse which (basically along with some helper methods) Modifies EligibilityBenefitDocument after it's created\r<br />\n<br />\ni.e., pass BenefitInfos[0].ServiceTypes[n].Code to helper which returns InnerText of specific element and sets ServiceType.Description based on return InnerText<br />\n<div style=\"color:Black;background-color:White;\"><pre>\r\n <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">QualifierSet</span> <span style=\"color:Red;\">Id</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">1365</span><span style=\"color:Black;\">&quot;</span> <span style=\"color:Red;\">Name</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">Service Type Code</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">&gt;</span>\n    <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">Allowed</span> <span style=\"color:Red;\">ID</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">1</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">&gt;</span>Medical Care<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">Allowed</span><span style=\"color:Blue;\">&gt;</span>\n    <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">Allowed</span> <span style=\"color:Red;\">ID</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">2</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">&gt;</span>Surgical<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">Allowed</span><span style=\"color:Blue;\">&gt;</span>\n    <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">Allowed</span> <span style=\"color:Red;\">ID</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">3</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">&gt;</span>Consultation<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">Allowed</span><span style=\"color:Blue;\">&gt;</span>\n    <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">Allowed</span> <span style=\"color:Red;\">ID</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">4</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">&gt;</span>Diagnostic X-Ray<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">Allowed</span><span style=\"color:Blue;\">&gt;</span>\n    <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">Allowed</span> <span style=\"color:Red;\">ID</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">5</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">&gt;</span>Diagnostic Lab<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">Allowed</span><span style=\"color:Blue;\">&gt;</span>\n    <span style=\"color:Blue;\">&lt;</span><span style=\"color:#A31515;\">Allowed</span> <span style=\"color:Red;\">ID</span><span style=\"color:Blue;\">=</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">6</span><span style=\"color:Black;\">&quot;</span><span style=\"color:Blue;\">&gt;</span>Radiation Therapy<span style=\"color:Blue;\">&lt;/</span><span style=\"color:#A31515;\">Allowed</span><span style=\"color:Blue;\">&gt;</span>\n    ...\r\n</pre></div>Forgive my code, it's ugly but, it's working for now; \r<br />\n<br />\nHelper methods inside custom EligibilityTransformationService.cs;<br />\n<div style=\"color:Black;background-color:White;\"><pre>\r\n<span style=\"color:Blue;\">private</span> EligibilityBenefitDocument _SetServiceTypeDescriptions(EligibilityBenefitDocument benefitDocument, XmlDocument ansiSpecification)\n        {\n            List&lt;EligibilityBenefitInformation&gt; benefitInfo = benefitDocument.EligibilityBenefitResponses[0].BenefitInfos;\n\n            <span style=\"color:Blue;\">foreach</span> (EligibilityBenefitInformation info <span style=\"color:Blue;\">in</span> benefitInfo)\n            {\n                <span style=\"color:Blue;\">foreach</span> (<span style=\"color:Blue;\">var</span> serviceType <span style=\"color:Blue;\">in</span> info.ServiceTypes)\n                {\n                    <span style=\"color:Blue;\">string</span> code = serviceType.Code;\n                    <span style=\"color:Blue;\">string</span> id = <span style=\"color:#A31515;\">&quot;1365&quot;</span>;\n                    \n                    XmlNamespaceManager nsManager = <span style=\"color:Blue;\">new</span> XmlNamespaceManager(ansiSpecification.NameTable);\n                    nsManager.AddNamespace(<span style=\"color:#A31515;\">&quot;ansi&quot;</span>, <span style=\"color:#A31515;\">&quot;http://tempuri.org/X12ParserSpecification.xsd&quot;</span>);\n                    <span style=\"color:Blue;\">string</span> xpathExpression = <span style=\"color:Blue;\">string</span>.Format(<span style=\"color:#A31515;\">&quot;descendant::ansi:QualifierSet[@Id=&#39;{0}&#39;]/ansi:Allowed[@ID=&#39;{1}&#39;]&quot;</span>, id, code);\n\n                    XmlNode ansiSpecNode = ansiSpecification.SelectSingleNode(xpathExpression,nsManager);\n                    serviceType.Description = (<span style=\"color:Blue;\">this</span>._GetServiceTypeDescription(code,ansiSpecNode));\n                }\n            }\n            <span style=\"color:Blue;\">return</span> benefitDocument;\n        }\n\n        <span style=\"color:Blue;\">private</span> <span style=\"color:Blue;\">string</span> _GetServiceTypeDescription(<span style=\"color:Blue;\">string</span> code, XmlNode ansiSpecNode)\n        {\n            <span style=\"color:Blue;\">return</span> ansiSpecNode.InnerText;\n        }\r\n</pre></div>ServiceType will now have the following instead of Description being Null;\r<br />\n<br />\n Code = &quot;30&quot;,\r<br />\n Description = &quot;Health Benefit Plan Coverage&quot;\r<br />\n<br />\nPlease let me know If you have any suggestions to make ServiceType have Description, otherwise, I can live with my workaround for now.<br />\n",
    "PostedDate": "2013-07-11T14:14:47.577-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1067255",
    "ThreadId": "449361",
    "Html": "After reviewing how the 5010 specification.xml works i would assume the following would fix your issue without code changes:<br />\n<br />\n<br />\nFrom<br />\n<pre><code>    &lt;Element Name=&quot;Industry Code&quot; Reference=&quot;03&quot; Type=&quot;AN&quot; MinLength=&quot;1&quot; MaxLength=&quot;30&quot; /&gt;</code></pre>\n\nTo<br />\n<pre><code>    &lt;Element Name=&quot;Industry Code&quot; Reference=&quot;03&quot; Type=&quot;AN&quot; MinLength=&quot;1&quot; MaxLength=&quot;30&quot; QualifierSetRef=&quot;Service Type Code&quot; /&gt;</code></pre>\n\n<strong>edit : just wanted to add this is untested and merely a guess</strong><br />\n",
    "PostedDate": "2013-07-11T14:40:44.347-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1067509",
    "ThreadId": "449361",
    "Html": "Hi, thank you again for the information. I tried making this change to the specification but, it didn't appear to work. As you can see in the image below, the Description is NULL;<br />\n<br />\n<img src=\"http://s17.postimg.org/a7lzpmbhr/Null_Description.jpg\" alt=\"Image\" /><br />\n<br />\nThis time, I made the change in OopFactory library Ansi-5010Specification.xml, recompiled and switched back to using the OopFactory EligibilityTransformationService.cs (as opposed to custom EligibilityTransformationService class).<br />\n<br />\nAny thoughts?<br />\n",
    "PostedDate": "2013-07-12T06:29:37.133-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1067530",
    "ThreadId": "449361",
    "Html": "I will actually try to review and see how it really works instead of speculating a bit later today and give you a real solutions. I hate providing these guesses that end up not working =)<br />\n",
    "PostedDate": "2013-07-12T07:21:31.93-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1067532",
    "ThreadId": "449361",
    "Html": "It's no problem, I very much appreciate the help. I too will continue to review the source and update if I find anything.<br />\n",
    "PostedDate": "2013-07-12T07:26:54.697-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1161407",
    "ThreadId": "449361",
    "Html": "I think the fix is to change this line in Ansi-5010Specification.xml\r<br />\n<br />\n &lt;Segment SegmentId=&quot;EB&quot;&gt;\r<br />\n...<br />\n<pre><code>&lt;Element Name=&quot;Service Type Code&quot; Reference=&quot;03&quot; Type=&quot;ID&quot; MinLength=&quot;1&quot; MaxLength=&quot;2&quot; QualifierSetRef=&quot;Service Type Code&quot; /&gt;</code></pre>\n\n...\r<br />\n&lt;/Segment&gt;\r<br />\n<br />\nThe key points are<br />\n<ul>\n<li>change Type=&quot;AN&quot; to Type=&quot;ID&quot;.</li>\n<li>\nAdd the appropriate qualifier set QualifierSetRef=&quot;Service Type Code&quot; <br />\n</li>\n</ul>\nThe serializer method will add the comment if the Type is an identifier, and with an associated description from the QualifierSetRef.\r<br />\n<br />\nThe Type &quot;AN&quot; means a free form text block, so the parser doesn't know there are predefined descriptions for each code.  This is where the Type=&quot;ID&quot; comes in.\r<br />\nIMO, this is a bug in the 5010Specification.xml file definition for this element, I'm not sure why it was &quot;Industry Code&quot; to start with, it seems &quot;Service Type Code&quot; is better.\r<br />\n<br />\nHope this helps, even though a little late.<br />\n",
    "PostedDate": "2014-01-13T07:34:46.36-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1161435",
    "ThreadId": "449361",
    "Html": "Thank you! I will try this. I've been using my workaround but, this will definitely be better.<br />\n",
    "PostedDate": "2014-01-13T07:43:17.163-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]